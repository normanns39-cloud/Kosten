<p dir="ltr">&lt;!DOCTYPE html&gt;<br>
&lt;html lang="de"&gt;<br>
&lt;head&gt;<br>
&#160;&#160;&#160; &lt;meta charset="UTF-8"&gt;<br>
&#160;&#160;&#160; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br>
&#160;&#160;&#160; &lt;title&gt;Essenskasse &amp; Budget&lt;/title&gt;<br>
&#160;&#160;&#160; &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;<br>
&lt;/head&gt;<br>
&lt;body class="p-4 bg-slate-100"&gt;<br>
&#160;&#160;&#160; &lt;div class="max-w-md mx-auto"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="bg-blue-600 text-white p-6 rounded-t-2xl shadow-lg text-center"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;h1 class="text-2xl font-bold"&gt;&#128722; Haushaltskasse&lt;/h1&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;p class="text-blue-100 text-sm mt-1"&gt;Gesamtbudget: 150.000 HUF&lt;/p&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="mt-4 bg-white/20 p-3 rounded-lg"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class="text-xs uppercase font-bold block text-blue-200"&gt;Restaurant-Guthaben&lt;/span&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span id="restGuthaben" class="text-3xl font-mono font-bold"&gt;150.000&lt;/span&gt; &lt;span class="text-xl"&gt;HUF&lt;/span&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="bg-white p-4 shadow-sm flex justify-between text-xs border-b"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="text-center w-1/2 border-r"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;p class="text-gray-500 uppercase font-bold"&gt;Haus 1 (A+N)&lt;/p&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;p id="sumH1" class="text-lg font-mono font-semibold text-blue-600"&gt;0&lt;/p&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="text-center w-1/2"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;p class="text-gray-500 uppercase font-bold"&gt;Haus 2 (R+A)&lt;/p&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;p id="sumH2" class="text-lg font-mono font-semibold text-purple-600"&gt;0&lt;/p&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="bg-white p-6 shadow-md border-b"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="grid grid-cols-2 gap-2 mb-3"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;select id="user" class="p-3 border rounded-xl bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;option value="Anki"&gt;Anki&lt;/option&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;option value="Norman"&gt;Norman&lt;/option&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;option value="Rosi"&gt;Rosi&lt;/option&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;option value="Andr&#233;"&gt;Andr&#233;&lt;/option&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/select&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;input type="number" id="amount" placeholder="Betrag (HUF)" class="p-3 border rounded-xl bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;button onclick="senden()" class="w-full bg-green-500 hover:bg-green-600 text-white p-4 rounded-xl font-bold transition shadow-lg active:scale-95"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Eintrag speichern<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/button&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="bg-white p-4 rounded-b-2xl shadow-md"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;h2 class="text-sm font-bold text-gray-400 uppercase mb-3"&gt;Verlauf&lt;/h2&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div id="liste" class="space-y-3"&gt;&lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;<br>
&#160;&#160;&#160; &lt;/div&gt;</p>
<p dir="ltr">&#160;&#160;&#160; &lt;script type="module"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; const firebaseConfig = {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; apiKey: "AIzaSyDKBp1uXTQnWivOQ7UEkufMUoUNXSd6QyA",<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; authDomain: "haushaltskasse-b4c9e.firebaseapp.com",<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; databaseURL: "https://haushaltskasse-b4c9e-default-rtdb.firebaseio.com",<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; projectId: "haushaltskasse-b4c9e",<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; storageBucket: "haushaltskasse-b4c9e.firebasestorage.app",<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; messagingSenderId: "460885989812",<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; appId: "1:460885989812:web:1a5713db936e459e207ae1"<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; };</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; const app = initializeApp(firebaseConfig);<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; const db = getDatabase(app);<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; const dbRef = ref(db, 'einkaeufe');</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; window.senden = function() {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const u = document.getElementById('user').value;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const a = document.getElementById('amount').value;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if(a &amp;&amp; a &gt; 0) {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; push(dbRef, { <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; user: u, <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; amount: parseFloat(a),<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; timestamp: new Date().toLocaleDateString('de-DE') <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; });<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; document.getElementById('amount').value = '';<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; };</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; window.loeschen = function(id) {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if(confirm("Eintrag wirklich l&#246;schen?")) {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; remove(ref(db, 'einkaeufe/' + id));<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; };</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160; onValue(dbRef, (snapshot) =&gt; {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const data = snapshot.val();<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const liste = document.getElementById('liste');<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const guthabenAnzeige = document.getElementById('restGuthaben');<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const sumH1Anzeige = document.getElementById('sumH1');<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const sumH2Anzeige = document.getElementById('sumH2');<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; liste.innerHTML = "";<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; let gesamtAusgaben = 0;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; let h1Sum = 0; // Anki + Norman<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; let h2Sum = 0; // Rosi + Andr&#233;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const budget = 150000;</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if (data) {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const keys = Object.keys(data).reverse();<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; keys.forEach(id =&gt; {<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const item = data[id];<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gesamtAusgaben += item.amount;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; // Haushalte trennen<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if(item.user === "Anki" || item.user === "Norman") h1Sum += item.amount;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; else h2Sum += item.amount;</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; liste.innerHTML += `<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-100"&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class="font-bold ${item.user === 'Anki' || item.user === 'Norman' ? 'text-blue-600' : 'text-purple-600'}"&gt;${item.user}&lt;/span&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class="text-[10px] text-gray-400 ml-2"&gt;${item.timestamp}&lt;/span&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;div class="text-lg font-mono font-bold"&gt;${item.amount.toLocaleString()} &lt;span class="text-xs"&gt;HUF&lt;/span&gt;&lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;button onclick="loeschen('${id}')" class="text-red-300 p-2 hover:text-red-600"&gt;&#10005;&lt;/button&gt;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/div&gt;`;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; });<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p dir="ltr">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; const rest = budget - gesamtAusgaben;<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; guthabenAnzeige.innerText = rest.toLocaleString();<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; sumH1Anzeige.innerText = h1Sum.toLocaleString();<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; sumH2Anzeige.innerText = h2Sum.toLocaleString();<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if(rest &lt; 0) guthabenAnzeige.parentElement.style.backgroundColor = "rgba(239, 68, 68, 0.5)";<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; else guthabenAnzeige.parentElement.style.backgroundColor = "rgba(255, 255, 255, 0.2)";<br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160; });<br>
&#160;&#160;&#160; &lt;/script&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;</p>
